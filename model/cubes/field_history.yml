cubes:
  - name: field_history
    sql_table: public.crm_field_history

    measures:
      - name: count
        type: count

      - name: unique_entities
        type: count_distinct
        sql: entity_id

      - name: unique_fields
        type: count_distinct
        sql: field_name

    dimensions:
      - name: id
        sql: id
        type: string
        primary_key: true

      - name: entity_type
        sql: entity_type
        type: string

      - name: entity_id
        sql: entity_id
        type: string

      - name: field_name
        sql: field_name
        type: string

      - name: old_value
        sql: old_value
        type: string

      - name: new_value
        sql: new_value
        type: string

      - name: changed_by
        sql: changed_by
        type: string

      - name: change_source
        sql: change_source
        type: string

      - name: changed_at
        sql: changed_at
        type: time
